diff --git a/src/Android.mk b/src/Android.mk
index 5cbe6b5..30b5c0c 100644
--- a/src/Android.mk
+++ b/src/Android.mk
@@ -39,8 +39,7 @@ LOCAL_CLANG_CFLAGS += \
 
 LOCAL_CFLAGS := \
     -DLINUX -DANDROID -g -Wall -Wno-unused \
-    -DPSBVIDEO_LOG_ENABLE -DPSBVIDEO_VXD392 \
-    -DPSBVIDEO_MSVDX_DEC_TILING -DPSBVIDEO_MSVDX_EC
+    -DPSBVIDEO_LOG_ENABLE
 
 LOCAL_C_INCLUDES := \
     $(call include-path-for, libhardware)/hardware \
@@ -78,11 +77,12 @@ LOCAL_SRC_FILES := \
     pnw_VC1.c \
     pnw_rotate.c \
     tng_vld_dec.c \
-    tng_yuv_processor.c \
-    tng_VP8.c \
-    tng_jpegdec.c
+    tng_yuv_processor.c
 
 ifneq ($(filter $(TARGET_BOARD_PLATFORM),merrifield moorefield morganfield),)
+LOCAL_CFLAGS += -DPSBVIDEO_VXD392 \
+    -DPSBVIDEO_MSVDX_DEC_TILING -DPSBVIDEO_MSVDX_EC
+
 LOCAL_SRC_FILES += \
     pnw_H263ES.c \
     pnw_H264ES.c \
@@ -154,7 +154,22 @@ LOCAL_CFLAGS += -DPSBVIDEO_MRFL_VPP_ROTATE
 endif
 endif
 
+else ifeq ($(TARGET_BOARD_PLATFORM),sc1) # Medfield mfld_pr2 (Razr I)
+LOCAL_SRC_FILES += \
+    pnw_H263ES.c \
+    pnw_H264ES.c \
+    pnw_MPEG4ES.c \
+    pnw_cmdbuf.c \
+    pnw_hostcode.c \
+    pnw_hostheader.c \
+    pnw_hostjpeg.c \
+    pnw_jpeg.c \
+    tng_ved_scaling.c
+LOCAL_CFLAGS += -DPSBVIDEO_MFLD
+#LOCAL_SHARED_LIBRARIES += libpvr2d
+
 else
+
 LOCAL_CFLAGS += \
     -DPSBVIDEO_VXD392 -DBAYTRAIL \
     -DPSBVIDEO_MSVDX_DEC_TILING -DPSBVIDEO_MSVDX_EC
diff --git a/src/pnw_cmdbuf.c b/src/pnw_cmdbuf.c
index e67023e..852056a 100644
--- a/src/pnw_cmdbuf.c
+++ b/src/pnw_cmdbuf.c
@@ -630,7 +630,7 @@ int pnw_context_flush_cmdbuf(object_context_p obj_context)
 }
 
 
-int pnw_get_parallel_core_number(object_context_p obj_context)
+uint32_t pnw_get_parallel_core_number(object_context_p obj_context)
 {
 
     context_ENC_p ctx = (context_ENC_p)(obj_context->format_data);
diff --git a/src/pnw_cmdbuf.h b/src/pnw_cmdbuf.h
index 4c93ba7..f4dc25d 100644
--- a/src/pnw_cmdbuf.h
+++ b/src/pnw_cmdbuf.h
@@ -226,6 +226,6 @@ int pnw_context_flush_cmdbuf(object_context_p obj_context);
  *
  * Return the number of paralled cores used.
  */
-int pnw_get_parallel_core_number(object_context_p obj_context);
+uint32_t pnw_get_parallel_core_number(object_context_p obj_context);
 #endif /* _PNW_CMDBUF_H_ */
 
diff --git a/src/psb_drv_video.c b/src/psb_drv_video.c
index 930f208..d5db890 100755
--- a/src/psb_drv_video.c
+++ b/src/psb_drv_video.c
@@ -3389,7 +3389,7 @@ EXPORT VAStatus __vaDriverInit_0_31(VADriverContextP ctx)
         driver_data->profile2Format[VAProfileH264ConstrainedBaseline][VAEntrypointVLD] = &pnw_H264_vtable;
 
         driver_data->vpp_profile = &tng_yuv_processor_vtable;
-        driver_data->ved_vpp = 1;
+        //driver_data->ved_vpp = 1;
     }
 #endif
 
