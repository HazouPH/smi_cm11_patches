From b88a442af34c1c48941d97af9340ab864fe31204 Mon Sep 17 00:00:00 2001
From: Patrick Harbers <jgrharbers@gmail.com>
Date: Tue, 29 Mar 2016 00:59:55 +0200
Subject: [PATCH] Fix type in Quirk and set BOARD_USES_MRST_OMX

Change-Id: I5d05c6b0c83b8cd7190bea8a4b02d52a452532a3
---
 media/libstagefright/OMXCodec.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/media/libstagefright/OMXCodec.cpp b/media/libstagefright/OMXCodec.cpp
index a8a29f0..c18f41d 100644
--- a/media/libstagefright/OMXCodec.cpp
+++ b/media/libstagefright/OMXCodec.cpp
@@ -399,7 +399,7 @@ uint32_t OMXCodec::getComponentQuirks(
         quirks |= kOutputBuffersAreUnreadable;
     }
     if (list->codecHasQuirk(
-                index, "requies-loaded-to-idle-after-allocation")) {
+                index, "requires-loaded-to-idle-after-allocation")) {
         quirks |= kRequiresLoadedToIdleAfterAllocation;
     }
     if (list->codecHasQuirk(
@@ -3611,7 +3611,7 @@ status_t OMXCodec::freeBuffersOnPort(
     for (size_t i = buffers->size(); i-- > 0;) {
         BufferInfo *info = &buffers->editItemAt(i);
 
-#ifdef MTK_HARDWARE
+#if defined(BOARD_USES_MRST_OMX) || defined(MTK_HARDWARE)
         if (onlyThoseWeOwn && (info->mStatus == OWNED_BY_COMPONENT || info->mStatus == OWNED_BY_CLIENT)) {
 #else
         if (onlyThoseWeOwn && info->mStatus == OWNED_BY_COMPONENT) {
-- 
2.5.0

